#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct{
  char rua[51];
  char bairro[51];
  int cep;
}TEndereco;

typedef struct{
  int codigo;
  char nome[51];
  int idade;
  float salario;
  TEndereco* endereco;

}TCliente;

void imprimeCliente(TCliente *cliente){
  if(cliente!=NULL){
  printf("\n");
  printf("Nome: %s\n",cliente->nome);
  printf("Código: %d\n",cliente->codigo);
  printf("Idade: %d\n",cliente->idade);
  printf("Salário: %.2f\n",cliente->salario);
  printf("Rua: %s\n",cliente->endereco->rua);
  printf("Bairro: %s\n",cliente->endereco->bairro);
  printf("CEP: %d\n",cliente->endereco->cep);
  }
}

TCliente* lerCliente(TCliente *cliente, char nome[],int codigo, int idade, float salario, char rua[],char bairro[],int cep){
  cliente = (TCliente*)malloc(sizeof(TCliente));
  if(cliente==NULL) {printf("Memória insuficiente"); return 0;}
  strcpy(cliente->nome,nome);
  cliente->codigo = codigo;
  cliente->idade = idade;
  cliente->salario = salario;
  cliente->endereco = (TEndereco*)malloc(sizeof(TEndereco));
  strcpy(cliente->endereco->rua,rua);
  strcpy(cliente->endereco->bairro,bairro);
  cliente->endereco->cep = cep;
  return cliente;
}

void alterarEndereco(TCliente *cliente){
  printf("Digite a rua:\n");
  scanf(" %[^\n]s",cliente->endereco->rua);
  printf("Digite o bairro:\n");
  scanf(" %[^\n]s",cliente->endereco->bairro);
  printf("Digite o CEP:\n");
  scanf("%d",&cliente->endereco->cep);
}


int main(){
  int num;
  TCliente *ponteiro = NULL;
  while(1){
    printf("\nMENU PRINCIPAL\n---------------\n1 - Cadastrar novo cliente\n2 - Ver dados de cliente\n3 - Alterar endereço\n4 - Destruir cliente\n5 - Sair\nDigite sua opção: ");
    scanf("%d",&num);
    if(num==5) break;
    else if(num==1){
      char nome[51],rua[51],bairro[51];
      int codigo, idade,cep;
      float salario;
      printf("\nCadastrar novo cliente\n---------------\nDigite o nome:\n");
      scanf(" %[^\n]s",nome);
      printf("Digite o código:\n");
      scanf("%d",&codigo);
      printf("Digite a idade:\n");
      scanf("%d",&idade);
      printf("Digite o salário:\n");
      scanf("%f",&salario);
      printf("Digite a rua:\n");
      scanf(" %[^\n]s",rua);
      printf("Digite o bairro:\n");
      scanf(" %[^\n]s",bairro);
      printf("Digite o CEP:\n");
      scanf("%d",&cep);
      ponteiro = lerCliente(ponteiro,nome,codigo,idade,salario,rua,bairro,cep);
  }
    else if(num==2){
      imprimeCliente(ponteiro);
    }
    else if(num==3){
      alterarEndereco(ponteiro);
    }
    else if(num==4){
      free(ponteiro->endereco);
      free(ponteiro);
    }
  }

}

